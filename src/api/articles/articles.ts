/**
 * Generated by orval v6.29.1 üç∫
 * Do not edit manually.
 * MyApp API
 * OpenAPI spec version: 1.0.0
 */
import { useMutation, useQuery } from '@tanstack/react-query';
import type {
  MutationFunction,
  QueryFunction,
  QueryKey,
  UseMutationOptions,
  UseMutationResult,
  UseQueryOptions,
  UseQueryResult,
} from '@tanstack/react-query';

import { customInstance } from '.././custom-instance';
import type { BodyType, ErrorType } from '.././custom-instance';
import type {
  ArticleOut,
  ArticleResponseSchema,
  ArticlesApiCreateArticleBody,
  ArticlesApiGetPublicArticlesParams,
  ArticlesApiUpdateArticleBody,
  Message,
  PaginatedArticlesResponse,
} from '.././schemas';

type SecondParameter<T extends (...args: any) => any> = Parameters<T>[1];

/**
 * @summary Create Article
 */
export const articlesApiCreateArticle = (
  articlesApiCreateArticleBody: BodyType<ArticlesApiCreateArticleBody>,
  options?: SecondParameter<typeof customInstance>
) => {
  const formData = new FormData();
  if (articlesApiCreateArticleBody.image_file !== undefined) {
    formData.append('image_file', articlesApiCreateArticleBody.image_file);
  }
  if (articlesApiCreateArticleBody.pdf_file !== undefined) {
    formData.append('pdf_file', articlesApiCreateArticleBody.pdf_file);
  }
  formData.append('details', JSON.stringify(articlesApiCreateArticleBody.details));

  return customInstance<ArticleResponseSchema>(
    {
      url: `/api/articles/articles/`,
      method: 'POST',
      headers: { 'Content-Type': 'multipart/form-data' },
      data: formData,
    },
    options
  );
};

export const getArticlesApiCreateArticleMutationOptions = <
  TError = ErrorType<Message>,
  TContext = unknown,
>(options?: {
  mutation?: UseMutationOptions<
    Awaited<ReturnType<typeof articlesApiCreateArticle>>,
    TError,
    { data: BodyType<ArticlesApiCreateArticleBody> },
    TContext
  >;
  request?: SecondParameter<typeof customInstance>;
}): UseMutationOptions<
  Awaited<ReturnType<typeof articlesApiCreateArticle>>,
  TError,
  { data: BodyType<ArticlesApiCreateArticleBody> },
  TContext
> => {
  const { mutation: mutationOptions, request: requestOptions } = options ?? {};

  const mutationFn: MutationFunction<
    Awaited<ReturnType<typeof articlesApiCreateArticle>>,
    { data: BodyType<ArticlesApiCreateArticleBody> }
  > = (props) => {
    const { data } = props ?? {};

    return articlesApiCreateArticle(data, requestOptions);
  };

  return { mutationFn, ...mutationOptions };
};

export type ArticlesApiCreateArticleMutationResult = NonNullable<
  Awaited<ReturnType<typeof articlesApiCreateArticle>>
>;
export type ArticlesApiCreateArticleMutationBody = BodyType<ArticlesApiCreateArticleBody>;
export type ArticlesApiCreateArticleMutationError = ErrorType<Message>;

/**
 * @summary Create Article
 */
export const useArticlesApiCreateArticle = <
  TError = ErrorType<Message>,
  TContext = unknown,
>(options?: {
  mutation?: UseMutationOptions<
    Awaited<ReturnType<typeof articlesApiCreateArticle>>,
    TError,
    { data: BodyType<ArticlesApiCreateArticleBody> },
    TContext
  >;
  request?: SecondParameter<typeof customInstance>;
}): UseMutationResult<
  Awaited<ReturnType<typeof articlesApiCreateArticle>>,
  TError,
  { data: BodyType<ArticlesApiCreateArticleBody> },
  TContext
> => {
  const mutationOptions = getArticlesApiCreateArticleMutationOptions(options);

  return useMutation(mutationOptions);
};
/**
 * @summary Update Article
 */
export const articlesApiUpdateArticle = (
  articleId: number,
  articlesApiUpdateArticleBody: BodyType<ArticlesApiUpdateArticleBody>,
  options?: SecondParameter<typeof customInstance>
) => {
  const formData = new FormData();
  if (articlesApiUpdateArticleBody.image_file !== undefined) {
    formData.append('image_file', articlesApiUpdateArticleBody.image_file);
  }
  if (articlesApiUpdateArticleBody.pdf_file !== undefined) {
    formData.append('pdf_file', articlesApiUpdateArticleBody.pdf_file);
  }
  formData.append('details', JSON.stringify(articlesApiUpdateArticleBody.details));

  return customInstance<ArticleResponseSchema>(
    {
      url: `/api/articles/${articleId}`,
      method: 'PUT',
      headers: { 'Content-Type': 'multipart/form-data' },
      data: formData,
    },
    options
  );
};

export const getArticlesApiUpdateArticleMutationOptions = <
  TError = ErrorType<Message>,
  TContext = unknown,
>(options?: {
  mutation?: UseMutationOptions<
    Awaited<ReturnType<typeof articlesApiUpdateArticle>>,
    TError,
    { articleId: number; data: BodyType<ArticlesApiUpdateArticleBody> },
    TContext
  >;
  request?: SecondParameter<typeof customInstance>;
}): UseMutationOptions<
  Awaited<ReturnType<typeof articlesApiUpdateArticle>>,
  TError,
  { articleId: number; data: BodyType<ArticlesApiUpdateArticleBody> },
  TContext
> => {
  const { mutation: mutationOptions, request: requestOptions } = options ?? {};

  const mutationFn: MutationFunction<
    Awaited<ReturnType<typeof articlesApiUpdateArticle>>,
    { articleId: number; data: BodyType<ArticlesApiUpdateArticleBody> }
  > = (props) => {
    const { articleId, data } = props ?? {};

    return articlesApiUpdateArticle(articleId, data, requestOptions);
  };

  return { mutationFn, ...mutationOptions };
};

export type ArticlesApiUpdateArticleMutationResult = NonNullable<
  Awaited<ReturnType<typeof articlesApiUpdateArticle>>
>;
export type ArticlesApiUpdateArticleMutationBody = BodyType<ArticlesApiUpdateArticleBody>;
export type ArticlesApiUpdateArticleMutationError = ErrorType<Message>;

/**
 * @summary Update Article
 */
export const useArticlesApiUpdateArticle = <
  TError = ErrorType<Message>,
  TContext = unknown,
>(options?: {
  mutation?: UseMutationOptions<
    Awaited<ReturnType<typeof articlesApiUpdateArticle>>,
    TError,
    { articleId: number; data: BodyType<ArticlesApiUpdateArticleBody> },
    TContext
  >;
  request?: SecondParameter<typeof customInstance>;
}): UseMutationResult<
  Awaited<ReturnType<typeof articlesApiUpdateArticle>>,
  TError,
  { articleId: number; data: BodyType<ArticlesApiUpdateArticleBody> },
  TContext
> => {
  const mutationOptions = getArticlesApiUpdateArticleMutationOptions(options);

  return useMutation(mutationOptions);
};
/**
 * @summary Get Article
 */
export const articlesApiGetArticle = (
  articleSlug: string,
  options?: SecondParameter<typeof customInstance>,
  signal?: AbortSignal
) => {
  return customInstance<ArticleOut>(
    { url: `/api/articles/article/${articleSlug}`, method: 'GET', signal },
    options
  );
};

export const getArticlesApiGetArticleQueryKey = (articleSlug: string) => {
  return [`/api/articles/article/${articleSlug}`] as const;
};

export const getArticlesApiGetArticleQueryOptions = <
  TData = Awaited<ReturnType<typeof articlesApiGetArticle>>,
  TError = ErrorType<Message>,
>(
  articleSlug: string,
  options?: {
    query?: Partial<
      UseQueryOptions<Awaited<ReturnType<typeof articlesApiGetArticle>>, TError, TData>
    >;
    request?: SecondParameter<typeof customInstance>;
  }
) => {
  const { query: queryOptions, request: requestOptions } = options ?? {};

  const queryKey = queryOptions?.queryKey ?? getArticlesApiGetArticleQueryKey(articleSlug);

  const queryFn: QueryFunction<Awaited<ReturnType<typeof articlesApiGetArticle>>> = ({ signal }) =>
    articlesApiGetArticle(articleSlug, requestOptions, signal);

  return { queryKey, queryFn, enabled: !!articleSlug, ...queryOptions } as UseQueryOptions<
    Awaited<ReturnType<typeof articlesApiGetArticle>>,
    TError,
    TData
  > & { queryKey: QueryKey };
};

export type ArticlesApiGetArticleQueryResult = NonNullable<
  Awaited<ReturnType<typeof articlesApiGetArticle>>
>;
export type ArticlesApiGetArticleQueryError = ErrorType<Message>;

/**
 * @summary Get Article
 */
export const useArticlesApiGetArticle = <
  TData = Awaited<ReturnType<typeof articlesApiGetArticle>>,
  TError = ErrorType<Message>,
>(
  articleSlug: string,
  options?: {
    query?: Partial<
      UseQueryOptions<Awaited<ReturnType<typeof articlesApiGetArticle>>, TError, TData>
    >;
    request?: SecondParameter<typeof customInstance>;
  }
): UseQueryResult<TData, TError> & { queryKey: QueryKey } => {
  const queryOptions = getArticlesApiGetArticleQueryOptions(articleSlug, options);

  const query = useQuery(queryOptions) as UseQueryResult<TData, TError> & { queryKey: QueryKey };

  query.queryKey = queryOptions.queryKey;

  return query;
};

/**
 * Fetches and filters articles visible to the public based on their submission status
and community affiliation.

This endpoint allows for filtering and sorting of articles that:
i) Are not submitted to any community.
ii) Are published by communities.
iii) Are submitted and accepted (but not published) in a public community.

Parameters:
- search (str, optional): Filter articles by title.
- community (int, optional): Filter articles by community ID.
- sort (str, optional): Sort articles ('latest', 'popular', 'older').
- rating (int, optional): Filter articles by minimum rating.

Returns:
- List[ArticleSchema]: Serialized articles matching the filters.
 * @summary Get Public Articles
 */
export const articlesApiGetPublicArticles = (
  params?: ArticlesApiGetPublicArticlesParams,
  options?: SecondParameter<typeof customInstance>,
  signal?: AbortSignal
) => {
  return customInstance<PaginatedArticlesResponse>(
    { url: `/api/articles/`, method: 'GET', params, signal },
    options
  );
};

export const getArticlesApiGetPublicArticlesQueryKey = (
  params?: ArticlesApiGetPublicArticlesParams
) => {
  return [`/api/articles/`, ...(params ? [params] : [])] as const;
};

export const getArticlesApiGetPublicArticlesQueryOptions = <
  TData = Awaited<ReturnType<typeof articlesApiGetPublicArticles>>,
  TError = ErrorType<unknown>,
>(
  params?: ArticlesApiGetPublicArticlesParams,
  options?: {
    query?: Partial<
      UseQueryOptions<Awaited<ReturnType<typeof articlesApiGetPublicArticles>>, TError, TData>
    >;
    request?: SecondParameter<typeof customInstance>;
  }
) => {
  const { query: queryOptions, request: requestOptions } = options ?? {};

  const queryKey = queryOptions?.queryKey ?? getArticlesApiGetPublicArticlesQueryKey(params);

  const queryFn: QueryFunction<Awaited<ReturnType<typeof articlesApiGetPublicArticles>>> = ({
    signal,
  }) => articlesApiGetPublicArticles(params, requestOptions, signal);

  return { queryKey, queryFn, ...queryOptions } as UseQueryOptions<
    Awaited<ReturnType<typeof articlesApiGetPublicArticles>>,
    TError,
    TData
  > & { queryKey: QueryKey };
};

export type ArticlesApiGetPublicArticlesQueryResult = NonNullable<
  Awaited<ReturnType<typeof articlesApiGetPublicArticles>>
>;
export type ArticlesApiGetPublicArticlesQueryError = ErrorType<unknown>;

/**
 * @summary Get Public Articles
 */
export const useArticlesApiGetPublicArticles = <
  TData = Awaited<ReturnType<typeof articlesApiGetPublicArticles>>,
  TError = ErrorType<unknown>,
>(
  params?: ArticlesApiGetPublicArticlesParams,
  options?: {
    query?: Partial<
      UseQueryOptions<Awaited<ReturnType<typeof articlesApiGetPublicArticles>>, TError, TData>
    >;
    request?: SecondParameter<typeof customInstance>;
  }
): UseQueryResult<TData, TError> & { queryKey: QueryKey } => {
  const queryOptions = getArticlesApiGetPublicArticlesQueryOptions(params, options);

  const query = useQuery(queryOptions) as UseQueryResult<TData, TError> & { queryKey: QueryKey };

  query.queryKey = queryOptions.queryKey;

  return query;
};
